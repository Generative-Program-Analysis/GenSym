\section{Case Study} \label{cases_study}

\subsection{Abstract Compilation a la Staging}

\citeauthor{Boucher:1996:ACN:647473.727587} introduced abstract compilation as a new
implementation technique for abstract interpretation based static analysis \cite{Boucher:1996:ACN:647473.727587}.
The idea is inspired by partial evaluation and similar with the presented paper -- the program can be known 
at compile-time therefore the overhead if interpretation can be eliminated. The compiled analysis
can be represented by text or closures (higher-order functions).
Specifically, \citeauthor{Boucher:1996:ACN:647473.727587} show how to compile a monovariant control-flow 
analysis \cite{Shivers:1991:SSC:115865.115884, Shivers:1988:CFA:53990.54007} 
for continuation-passing style (CPS) programs. Since the analyzed program is in CPS, the analyzer 
is essentially a big-step CE (\textit{Control-Environment}) abstract interpreter.
After specializing the analyzer with respect to the input program, the \textit{control} part of 
abstract interpreter is eliminated, instead, the compiled analysis is a closure which takes an 
environment as argument. Therefore the overhead of traversing the abstract syntax tree of input 
program also has been eliminated.

In this section, we show that \citeauthor{Boucher:1996:ACN:647473.727587}'s abstract compilation can be 
understood and implemented as an instance of staging abstract interpreters.
We firstly revisit abstract compilation in the style of closure generation,
and then reproduce their result by adding stage annotations to the unstaged 0-CFA algorithm.
The generated program of our approach improves approximately the same extent of speed (roughly a factor of 2),
but without changing a single line of the analyzer program (with the use of LMS), 
while closure generation requires more engineering effort, such as a whole-program 
conversion on the analyzer. Moreover, our approach is able to not only remove the interpretive
overhead, but also specialize the data structures used in the analysis, for example, the store
that maps variables to sets of lambda.

\subsubsection{Closure Generation}

\subsubsection{Staged 0-CFA}

\subsubsection{Specializing the Data Structure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Control-flow Analysis}

The target language we presented in section \ref{bg_lang} is essentially a higher-order functional language.
One fundamental analysis task for functional programs is the control-flow analysis, i,e., determining
which functions will possibly be applied at each call-site. 
Though, in the previous section, we discussed abstraction compilation and staging on a monovariant 
control-flow analysis for programs written in continuation-passing style; 
in this section, based on the staged abstract interpreter we presented in section \ref{sai}, 
we further discuss staging control-flow analysis for direct style languages in depth, 
especially polyvariant analyses.

\subsubsection{Context/Path/Flow-Sensitivity}

\subsubsection{Mixed Sensitivity}

using different $k$ for $k$-CFA

\subsubsection{Store-widening}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Numerical Analysis in Imperative Languages} \label{cases_imp}

Beyond control-flow analysis, staging data structures used in the abstract interpreter, such as abstract domain.
It has been shown that specializing abstract domains with respect to the structure of analyzed program significantly 
improves the performance: a recent example is online decomposition of polyhedra \cite{DBLP:conf/popl/SinghPV17, Singh:2017:PCD:3177123.3158143}.
In this section, we present a similar idea for interval abstract domain using an \textit{offline} fashion by staging.

\subsubsection{Scaling to Imperative Languages}

Assignments, Loops, Exceptions

\subsubsection{Specializing Interval Domains}

Intervals, Numerical Analysis

Options: Data-flow analysis, taint analysis
